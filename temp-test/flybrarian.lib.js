const cosinedesign={core:{ui:{clear:function(el){if(el)for(;el.firstChild;)el.removeChild(el.firstChild)},create:function(tagName,className){const el=document.createElement(tagName);return className&&(el.className=className),el}},view:{View:function(model,mount,render,target){return(target=target||{}).model=model,target.mount=mount,target.render=render,target}}},data:{sort:{asc:function(a1,b1){return a1>b1?1:a1<b1?-1:0},dateASC:function(date1,date2){return date1>date2?1:date1<date2?-1:0}}}},festival={config:{year:2019,month:6,days:{tues:{day:2},wednes:{day:3},thurs:{day:4},fri:{description:"Bug Burn",day:5},satur:{description:"Temple Burn",day:6},sun:{description:"Exodus/GTFO",day:7}},FOMO_HOURS:3,FOMO_REFRESH:3e5,FOMO_TEST_DAY:null,FOMO_TEST_HOUR:null}};!function(festival,config){festival.model={event:function(stage,artist,start,end,name,description){end||(end=new Date(start)).setHours(end.getHours()+1);const e={artist:artist,stage:stage,start:start,end:end,name:name,description:description};return stage&&e.stage.events.add(e),e},artist:function(name,genres,affiliation){return{name:name,genres:genres,affiliation:affiliation}},stage:function(name,location,description){return{display:name,location:location,description:description,events:new Set,days:new Set}},date:function(day,hour,min){return min||(min=0),new Date(config.year,config.month,day,hour,min)},data:{camps:new Set,artists:new Set,events:new Set}}}(festival,festival.config);const flybrarian={};!function(root,ui,view){const View=cosinedesign.core.view.View,create=ui.create;const views={Artists:function(model){return View(model,function(){},function(){},{})},Camps:function(model){return View(model,function(){},function(){},{})},Genres:function(model){return View(model,function(){},function(){},{})},Schedule:function(model){return View(model,function(){const els={container:this.container=create("div","schedule day"),header:create("div","header"),timeline:this.timeline.mount(),timelineRight:this.timelineRight.mount(),lineups:this.lineups.mount()};return els.container.appendChild(els.header),els.container.appendChild(els.timeline),els.container.appendChild(els.lineups),els.container.appendChild(els.timelineRight),this.elements=els,this.container},function(){this.timeline.render(),this.lineups.render(),this.timelineRight.render()},{lineups:views.Lineups(model),timeline:views.Timeline(model),timelineRight:views.Timeline(model)})},Lineups:function(model){return View(model,function(){const els={container:this.container=create("div","lineups")};return this.elements=els,this.container},function(){const els=this.elements;model.lineups&&model.lineups.forEach(function(lineup,camp){const lineupView=views.Lineup({lineup:lineup,camp:camp});els.container.appendChild(lineupView.mount()),lineupView.render()})},{})},Lineup:function(model){return View(model,function(){const els={container:this.container=create("div","lineup"),header:create("div","header")};return els.container.appendChild(els.header),this.elements=els,this.container},function(){const els=this.elements;els.header.innerText=model.camp.display,this.model.lineup.forEach(function(event){const timeslot=create("div","event"),duration=function getDuration(event){const duration=(event.end-event.start)/1e3/60/60,hours=Math.floor(duration),mins=duration-hours;return{duration:duration,hours:hours,minutes:mins,class:"hours"+hours+(mins?"-30":"")}}(event);if(timeslot.classList.add(duration.class),event.artist){if(event.name){const nameNode=create("span","event-name");nameNode.innerText=event.name,timeslot.appendChild(nameNode)}const artistNode=create("span","artist-name");if(event.artist&&event.artist.constructor===Array){var names="";event.artist.forEach(function(artist){names&&(names+=", "),names+=artist.name}),artistNode.innerText=names+"  "}else artistNode.innerText=event.artist.name+"  ";if(timeslot.appendChild(artistNode),event.description){const descNode=create("span","event-desc");descNode.innerText=event.description,timeslot.appendChild(descNode)}}else timeslot.classList.add("empty");els.container.appendChild(timeslot)})},{})},Timeline:function(model){return View(model,function(){const els={container:this.container=create("div","timeslots"),header:create("div","timeslot header"),footer:create("div","timeslot footer")};return this.elements=els,this.container.appendChild(els.header),this.container},function(){const start=new Date(model.start),end=new Date(model.end),startDay=start.getDay();end.getDay();this.elements.header.innerText=start.toLocaleDateString("default",{weekday:"short"}),start.getMinutes()>0&&start.setMinutes(0),end.getMinutes()>0&&(end.setMinutes(0),end.setHours(end.getHours()+1));const hours=(end-start)/1e3/60/60;for(var i=0;i<hours;i++){const slot=create("div","timeslot"),slot30=create("div","timeslot"),d=new Date(start);d.setHours(d.getHours()+i),slot.innerText=d.getHours()+":00",slot30.innerText=d.getHours()+":30",this.container.appendChild(slot),this.container.appendChild(slot30),d.getDay()>startDay&&(slot.classList.add("next-day"),slot30.classList.add("next-day"))}this.container.appendChild(this.elements.footer),this.elements.footer.innerText=end.toLocaleDateString("default",{weekday:"short"})},{})}};root.views=views}(flybrarian,cosinedesign.core.ui),function(root){function collateLineups(eventSet){const lineups=new Map;return eventSet.forEach(function(e){var day=e.start.getDate();e.start.getHours()<10&&day--,lineups.has(day)||lineups.set(day,[]),lineups.get(day).push(e)}),lineups}const genres_bass="bass",genres_breaks="breaks",genres_dnb="drumnbass",genres_electroswing="electroswing",genres_techno="techno",genres_triphop="triphop",genres_world="world music",ev=festival.model.event,a=festival.model.artist,c=festival.model.stage,d=festival.model.date,days=festival.config.days,artists={ama:a("AMA"),acidBrunchClub:a("Acid Brunch Club"),alexxxan:a("AlexXxan",[genres_techno]),andreaMarks:a("Andrea Marks",[genres_techno]),ArcRunner:a("ArcRunner",["goth","industrial"]),captainFuck:a("Captain Fuck"),char:a("char7"),chuck:a("Chuck Chuck"),cosinezero:a("cosinezero",[genres_bass,genres_breaks,genres_dnb,"triphop"]),cromafor:a("Cromafor"),dabu:a("dabu",[genres_bass,genres_breaks,genres_dnb,genres_triphop]),damianPaul:a("Damian Paul",[genres_techno]),dekichan:a("dekichan",[genres_electroswing]),dessa:a("Nightshade",[genres_dnb]),djSlothrower:a("DJ SlothThrower"),dontnormally:a("dontnormally",[genres_techno,genres_bass]),Drift:a("Drift"),elementalFlux:a("Elemental Flux"),epochalyptic:a("Epochalyptic"),FaitAccompli:a("Fait Accompli"),fig:a("FiG",[genres_dnb,genres_breaks]),fox:a("Fox",[genres_dnb,"hiphop"]),garyCarlow:a("Gary Carlow",[genres_techno,"house"]),gav:a("DJ Gav"),JazzCabbage:a("Jazz Cabbage"),journeyWeaver:a("Journey Weaver"),kibbles:a("Kibbles & Beats"),leftCat:a("Left Cat"),livingLight:a("Living Light"),lTrain:a("L-Train",[genres_bass,genres_triphop]),keithMattar:a("Keith Mattar",[genres_techno]),megadipites:a("Megadipites",[]),MykShyck:a("Myk Shyck"),nateDef:a("Nate DeF"),oleg:a("Oleg"),omegaProtocol:a("Omega Protocol",["dnb"]),parmaChai:a("Parma Chai"),paulErlich:a("Paul Erlich"),Psylander:a("Psylander"),Saphire:a("Saphire",["goth","industrial","downtempo"]),Sasquatch:a("Sasquatch"),Scrams:a("Scrams"),SmoKi:a("SmoKi"),soundShaman:a("Sound Shaman"),TempoSuave:a("Tempo Suave"),Ticho:a("Rob Ticho"),Tigress:a("Tigress",[genres_bass,genres_world]),unknown:a("(UNKNOWN)",[]),vinylBlight:a("Vinyl Blight",[genres_bass]),yourFurryFriend:a("Your Furry Friend"),SeanManton:a("Sean Manton"),DimRedGlo:a("Dim Red Glo"),KarNam:a("Kar'Nam"),OFTHESUN:a("OFTHESUN"),MikeSim:a("Mike Sim"),Fractillian:a("Fractillian"),DADABOTS:a("DADABOTS"),cRtxLzn:a("cRtxLzn"),DrSnipples:a("Dr Snipples"),djcoldcuts:a("dj cold cuts"),Audiofile77:a("Audiofile77"),EddyVanRaven:a("Eddy Van Raven"),AWC:a("AWC"),dJR:a("D:[JR]"),ShwillyB:a("Shwilly B"),unknown:a(" - ")},camps={bac:c("Bring a Cup"),glutenFree:c("Gluten Free Halloween"),lamp:c("Camp Lamp"),diode:c("Diode"),femmeDomme:c("Femme Dom"),lions:c("Lovin' Lions"),strangeMaine:c("Strange Maine")},data=[ev(camps.glutenFree,artists.gav,d(days.wednes.day,18,30),d(days.wednes.day,20,30),"BLK WICCN BEATZ","hip hop, dark house, d&b, kumbía en español, bounce beatz, Taino tracks by Queer Black, Brown, and Idigen@s Peoples."),ev(camps.strangeMaine,[artists.ArcRunner,artists.Saphire],d(days.thurs.day,21),d(days.fri.day,1),"Shi*Wrecked, Under The Sea","Wash ashore! Come visit the dark depths that live near the lighthouse for Strange Maine's annual Thursday night gathering. Dance to Goth/Industrial and all things Dark, meet some Mainers and hang out in the Lighthouse. Alcoholic and Non alcoholic drinks will be available."),ev(camps.strangeMaine,artists.Saphire,d(days.satur.day,21),d(days.sun.day,1),"Slow & Sexy Dance Party","Heed the siren call! We slow down the BPM so you can make your move, inspired by Ceremony's 'Down With Tempo'. Featuring DJ Saphire and our guest bartender: the lovely Talena (Bring A Cup) will be pouring alcoholic and non alcoholic drinks."),ev(camps.femmeDomme,artists.ArcRunner,d(days.fri.day,23)),ev(camps.femmeDomme,artists.Saphire,d(days.satur.day,0)),ev(camps.femmeDomme,artists.alexxxan,d(days.satur.day,1)),ev(camps.femmeDomme,artists.dontnormally,d(days.satur.day,2)),ev(camps.femmeDomme,artists.scrams,d(days.satur.day,16)),ev(camps.femmeDomme,[artists.ama,artists.FaitAccompli],d(days.satur.day,17),d(days.satur.day,19)),ev(camps.femmeDomme,artists.char,d(days.satur.day,22)),ev(camps.femmeDomme,artists.dekichan,d(days.satur.day,23)),ev(camps.femmeDomme,artists.kibbles,d(days.sun.day,0)),ev(camps.femmeDomme,artists.cosinezero,d(days.sun.day,1)),ev(camps.femmeDomme,artists.vinylBlight,d(days.sun.day,2)),ev(camps.lions,[artists.djSlothrower,artists.fig],d(days.wednes.day,14),d(days.wednes.day,16),"Rawr a Cup ~ Bring a Lion","Bring a Cup takes over the Lions."),ev(camps.lions,artists.elementalFlux,d(days.wednes.day,18)),ev(camps.lions,artists.lTrain,d(days.wednes.day,19),d(days.wednes.day,21)),ev(camps.lions,artists.epochalyptic,d(days.thurs.day,15)),ev(camps.lions,artists.JazzCabbage,d(days.thurs.day,16)),ev(camps.lions,artists.parmaChai,d(days.thurs.day,17)),ev(camps.lions,artists.MykShyck,d(days.thurs.day,18)),ev(camps.lions,artists.paulErlich,d(days.thurs.day,19)),ev(camps.lions,artists.SeanManton,d(days.thurs.day,20)),ev(camps.lions,artists.DimRedGlo,d(days.thurs.day,21)),ev(camps.lions,artists.KarNam,d(days.thurs.day,22)),ev(camps.lions,artists.OFTHESUN,d(days.thurs.day,23)),ev(camps.lions,artists.MikeSim,d(days.fri.day,0)),ev(camps.lions,artists.Fractillian,d(days.fri.day,1)),ev(camps.lions,artists.DADABOTS,d(days.fri.day,2),d(days.fri.day,2,30)),ev(camps.lions,artists.cRtxLzn,d(days.fri.day,2,30),d(days.fri.day,3,0)),ev(camps.lions,artists.Drift,d(days.fri.day,3)),ev(camps.lions,artists.Psylander,d(days.fri.day,4)),ev(camps.lions,artists.TempoSuave,d(days.fri.day,5),d(days.fri.day,7,0)),ev(camps.lions,artists.nateDef,d(days.fri.day,15)),ev(camps.lions,artists.omegaProtocol,d(days.fri.day,16)),ev(camps.lions,artists.SmoKi,d(days.fri.day,17)),ev(camps.lions,artists.livingLight,d(days.fri.day,23)),ev(camps.lions,artists.acidBrunchClub,d(days.satur.day,0)),ev(camps.lions,artists.dontnormally,d(days.satur.day,1)),ev(camps.lions,artists.Sasquatch,d(days.satur.day,2)),ev(camps.lions,artists.captainFuck,d(days.satur.day,3)),ev(camps.lions,artists.Tigress,d(days.satur.day,4)),ev(camps.lions,artists.soundShaman,d(days.satur.day,5),d(days.satur.day,7)),ev(camps.lions,artists.char,d(days.satur.day,16,30),d(days.satur.day,17,30),"Queer Dance Party"),ev(camps.lions,artists.leftCat,d(days.satur.day,17,30)),ev(camps.lions,artists.keithMattar,d(days.satur.day,18,30)),ev(camps.lions,artists.alexxxan,d(days.satur.day,22)),ev(camps.lions,artists.cosinezero,d(days.satur.day,23)),ev(camps.lions,artists.vinylBlight,d(days.sun.day,0,0)),ev(camps.lions,artists.dabu,d(days.sun.day,1,0)),ev(camps.lions,artists.djSlothrower,d(days.sun.day,2,0)),ev(camps.lamp,artists.DrSnipples,d(days.thurs.day,13)),ev(camps.lamp,artists.djcoldcuts,d(days.thurs.day,14)),ev(camps.lamp,artists.Audiofile77,d(days.thurs.day,15)),ev(camps.lamp,artists.megadipites,d(days.thurs.day,16)),ev(camps.lamp,artists.djSlothrower,d(days.thurs.day,17)),ev(camps.lamp,artists.alexxxan,d(days.thurs.day,22)),ev(camps.lamp,artists.ShwillyB,d(days.thurs.day,23)),ev(camps.lamp,artists.megadipites,d(days.fri.day,0)),ev(camps.lamp,artists.leftCat,d(days.fri.day,1)),ev(camps.lamp,artists.EddyVanRaven,d(days.fri.day,2)),ev(camps.lamp,artists.dontnormally,d(days.fri.day,3)),ev(camps.lamp,artists.AWC,d(days.fri.day,4),d(days.fri.day,5)),ev(camps.lamp,artists.dJR,d(days.fri.day,5),d(days.fri.day,6)),ev(camps.lamp,artists.cosinezero,d(days.fri.day,23)),ev(camps.lamp,[artists.fox,artists.fig,artists.dabu,artists.oleg],d(days.satur.day,0),d(days.satur.day,3),"DnB Throwdown"),ev(camps.lamp,artists.vinylBlight,d(days.satur.day,3)),ev(camps.lamp,artists.omegaProtocol,d(days.satur.day,4)),ev(camps.lamp,artists.Psylander,d(days.satur.day,5)),ev(camps.lamp,artists.KarNam,d(days.satur.day,11)),ev(camps.lamp,artists.char,d(days.satur.day,14)),ev(camps.lamp,artists.andreaMarks,d(days.satur.day,15)),ev(camps.lamp,artists.journeyWeaver,d(days.satur.day,22)),ev(camps.lamp,artists.cromafor,d(days.satur.day,23)),ev(camps.lamp,artists.Tigress,d(days.sun.day,0)),ev(camps.lamp,artists.livingLight,d(days.sun.day,1)),ev(camps.lamp,artists.keithMattar,d(days.sun.day,2)),ev(camps.lamp,artists.Psylander,d(days.sun.day,3)),ev(camps.lamp,artists.garyCarlow,d(days.sun.day,4),d(days.sun.day,6)),ev(camps.diode,artists.journeyWeaver,d(days.thurs.day,13),d(days.thurs.day,15),"Ecstatic Dance"),ev(camps.diode,artists.garyCarlow,d(days.thurs.day,16),d(days.thurs.day,18),"Disco Party"),ev(camps.diode,artists.char,d(days.thurs.day,18),d(days.thurs.day,20)),ev(camps.diode,artists.omegaProtocol,d(days.thurs.day,20)),ev(camps.diode,artists.oleg,d(days.thurs.day,21)),ev(camps.diode,artists.dessa,d(days.thurs.day,22)),ev(camps.diode,artists.dekichan,d(days.thurs.day,23)),ev(camps.diode,artists.livingLight,d(days.fri.day,0),d(days.fri.day,1,30)),ev(camps.diode,artists.fig,d(days.fri.day,1,30),d(days.fri.day,3)),ev(camps.diode,artists.fox,d(days.fri.day,3)),ev(camps.diode,artists.vinylBlight,d(days.fri.day,4)),ev(camps.diode,artists.Ticho,d(days.fri.day,15),d(days.fri.day,17),"Mx Firefly"),ev(camps.diode,artists.Ticho,d(days.fri.day,17),d(days.fri.day,18),"Mx Firefly Afterparty"),ev(camps.diode,artists.dekichan,d(days.fri.day,18),d(days.fri.day,19),"Mx Firefly Afterparty"),ev(camps.diode,artists.damianPaul,d(days.satur.day,0),d(days.satur.day,1,30)),ev(camps.diode,[artists.keithMattar,artists.garyCarlow],d(days.satur.day,1,30),d(days.satur.day,5)),ev(camps.diode,artists.unknown,d(days.satur.day,14),d(days.satur.day,16),"Contra Dance"),ev(camps.diode,artists.dabu,d(days.satur.day,16)),ev(camps.diode,artists.ShwillyB,d(days.satur.day,23),d(days.sun.day,0,30)),ev(camps.diode,artists.megadipites,d(days.sun.day,0,30),d(days.sun.day,1,30)),ev(camps.diode,artists.EddyVanRaven,d(days.sun.day,1,30),d(days.sun.day,3,30)),ev(camps.diode,artists.dabu,d(days.sun.day,3,30),d(days.sun.day,5)),ev(camps.bac,artists.captainFuck,d(days.wednes.day,16),d(days.wednes.day,18),"Rawr a Cup ~ Bring a Lion","The Lions take over Bring a Cup."),ev(camps.bac,artists.lTrain,d(days.thurs.day,16),d(days.thurs.day,18),"Party Music"),ev(camps.bac,artists.unknown,d(days.thurs.day,20),d(days.thurs.day,21),"Live Music Jam Session"),ev(camps.bac,artists.unknown,d(days.thurs.day,21),d(days.thurs.day,22),"Moar Live Music"),ev(camps.bac,artists.chuck,d(days.fri.day,16),d(days.fri.day,18),"Chuck Chuck spins us some Prince"),ev(camps.bac,artists.chuck,d(days.satur.day,16),d(days.satur.day,18),"Chuck Chuck spins us some party funk & breaks"),ev(camps.bac,artists.chuck,d(days.satur.day,19),d(days.satur.day,21),"Chuck Chuck spins us some hiphop & soul")],campMap=new Map,campArray=[],artistsArray=[];Object.keys(camps).forEach(function(key){const camp=camps[key];campArray.push(camp),campMap.set(key,camp);const lineups=collateLineups(camp.events);camp.lineups=lineups}),Object.keys(artists).forEach(function(key){const a=artists[key];artistsArray.push(a)}),root.data={artists:artistsArray,stages:campArray,events:data,collateLineups:collateLineups}}(flybrarian),function(root,data,models){const ev=festival.model.event;function sortEvents(e1,e2){return e1.start>e2.start?1:e1.start<e2.start?-1:0}function dateDiffMin(d1,d2){var diff=d2-d1;return 0==diff?0:(diff/=1e3,diff/=60)}function getGaps(lineup){const gaps=[],length=lineup.length;for(var current,next,i=0;i<length&&i+1!=length;i++){current=lineup[i],next=lineup[i+1];const diff=dateDiffMin(current.end,next.start),diffHours=diff/60,wholeHours=Math.floor(diffHours);diff&&gaps.push({prev:current,next:next,startIndex:i+1,totalMinutes:diff,hours:wholeHours,remainderMinutes:diff-60*wholeHours})}return gaps}function getGapFiller(gap){const fillers=[],remainingGap={start:new Date(gap.prev.end),end:new Date(gap.next.start)};var gapEnd=null,gapStart=null;30==gap.prev.end.getMinutes()&&((gapEnd=new Date(gap.prev.end)).setMinutes(0),gapEnd.setHours(gapEnd.getHours()+1),fillers.push(ev(null,null,new Date(gap.prev.end),gapEnd)),remainingGap.start.setMinutes(0),remainingGap.start.setHours(remainingGap.start.getHours()+1));const hourDec=dateDiffMin(remainingGap.start,remainingGap.end)/60,hours=Math.floor(hourDec);for(var i=0;i<hours;i++)fillers.push(ev(null,null,new Date(remainingGap.start))),remainingGap.start.setHours(remainingGap.start.getHours()+1);return 30==gap.next.start.getMinutes()&&((gapStart=new Date(gap.next.start)).setMinutes(0),gapEnd=new Date(gap.next.start),fillers.push(ev(null,null,gapStart,gapEnd))),fillers}function fillGapsInLineup(lineup,sorter){sorter?lineup.sort(sorter):lineup.sort(sortEvents),getGaps(lineup).forEach(function(gap){getGapFiller(gap).forEach(function(fill){lineup.push(fill)})}),sorter?lineup.sort(sorter):lineup.sort(sortEvents)}const schedules={},camps=[];Object.keys(flybrarian.data.stages).forEach(function(key){const stage=flybrarian.data.stages[key];camps.push(stage),Object.keys(stage.lineups).forEach(function(day){schedules[day]||(schedules[day]=[]),schedules[day].push(lineups[day])})});const process={lineups:{byDay:function(day){const lineups=new Map;return data.stages.forEach(function(camp){const lineup=camp.lineups.get(day);lineups.set(camp,lineup)}),lineups}}};function getEventWindow(overlap){return function(event){return event.start>=overlap.end?null:event.end<=overlap.start?null:event}}root.services={_test:process.lineups.byDay,utils:{sortEvents:sortEvents,dateDiffMin:dateDiffMin,getGaps:getGaps,getGapFiller:getGapFiller,fillGapsInLineup:fillGapsInLineup,getEventWindow:getEventWindow,fitEventWindow:function fitEventWindow(overlap){const filter=getEventWindow(overlap);return function(event){if(!(event=filter(event)))return;const clone=Object.assign({},event);return clone.start<overlap.start&&(clone.start=new Date(overlap.start)),clone.end>overlap.end&&(clone.end=new Date(overlap.end)),clone}}},lineups:{byDay:function(day,options){const lineups=process.lineups.byDay(day),state={start:null,end:null},paddedLineups=new Map;if(lineups.forEach(function(lineup,camp){if(lineup){const paddedLineup=[];var hasEvents=!1;lineup.forEach(function(event,day){options&&options.filter&&(event=options.filter(event)),event&&(hasEvents=!0,paddedLineup.push(event),state.start?state.start>event.start&&(state.start=event.start):state.start=event.start,state.end?state.end<event.end&&(state.end=event.end):state.end=event.end)}),hasEvents&&paddedLineups.set(camp,paddedLineup)}}),!state.start)return;state.start.getMinutes()&&(state.start=new Date(state.start),state.start.setMinutes(0)),state.end.getMinutes()&&(state.end=new Date(state.end),state.end.setHours(state.end.getHours()+1),state.end.setMinutes(0));const startHour=state.start.getHours();state.end.getHours();return paddedLineups.forEach(function(lineup,camp){lineup.sort(sortEvents);const firstEvent=lineup[0];if(firstEvent){const padHours=firstEvent.start.getHours()-startHour;if(padHours)for(var i=0;i<padHours;i++){const start=new Date(state.start);start.setHours(start.getHours()+i),lineup.unshift(ev(null,null,start))}fillGapsInLineup(lineup)}}),{start:state.start,end:state.end,lineups:paddedLineups}},byCamp:function(){}},lists:{artists:function(){},camps:function(){},genres:function(){}}}}(flybrarian,flybrarian.data),function(root,ui,festival,views,services){const state={},FOMO_LENGTH_HOURS=festival.config.FOMO_HOURS||3,FOMO_REFRESH=festival.config.FOMO_REFRESH,d=festival.model.date;festival.config.days;root.controllers={init:function(app){state.app=app},home:{main:function(){const create=ui.create,content=state.app.elements.content;ui.clear(content),document.body.classList.remove("fomo");for(var day=new Date(Date.now()).getDay();day<7;day++){const model=services.lineups.byDay(day);if(model&&model.start){content.appendChild(create("p","header")).innerText=model.start.toLocaleDateString("default",{weekday:"long",month:"long",day:"numeric"});const schedule=views.Schedule(model);content.appendChild(schedule.mount()),schedule.render(),content.appendChild(create("p","footer")),content.appendChild(create("div","page-break-after"))}}state.refreshFomo||(state.refreshFomo=setInterval(function(){try{root.controllers.home.fomoVision()}catch(ex){}},FOMO_REFRESH))},fomoVision:function(){try{const create=ui.create,content=state.app.elements.content;if(!window.matchMedia("(max-height: 479.9px)").matches&&!window.matchMedia("(max-width: 479.9px)").matches)throw"Desktop user detected! Moving to full mode";ui.clear(content);const today=festival.config.FOMO_TEST_DAY?d(festival.config.FOMO_TEST_DAY,festival.config.FOMO_TEST_HOUR):new Date(Date.now()),currentHour=today.getHours(),endTime=new Date(today),day=today.getDate();endTime.setHours(endTime.getHours()+FOMO_LENGTH_HOURS);const model=services.lineups.byDay(currentHour<7?day-1:day,{filter:services.utils.fitEventWindow({start:today,end:endTime})});if(model){if(content.appendChild(create("p","fomo-text")).innerText="FOMO-VISION: Now showing the next "+FOMO_LENGTH_HOURS+" hours of upcoming events.",model&&model.start){const schedule=views.Schedule(model);content.appendChild(schedule.mount()),schedule.render()}state.refreshFomo||(state.refreshFomo=setInterval(function(){try{root.controllers.home.fomoVision()}catch(ex){}},FOMO_REFRESH)),document.body.classList.add("fomo")}else root.controllers.home.main()}catch(ex){throw console.error(ex),ex}},camp:function(){}}}}(flybrarian,cosinedesign.core.ui,festival,flybrarian.views,flybrarian.services),function(root,core){root.app={elements:{}},"undefined"==typeof window||void 0===window.document||document.addEventListener("DOMContentLoaded",function(){root.app.elements.content=document.getElementById("content"),root.controllers.init(root.app);try{root.controllers.home.fomoVision()}catch(ex){root.controllers.home.main()}})}(flybrarian),flybrarian.festival=festival,module.exports=flybrarian;